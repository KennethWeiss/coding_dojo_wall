<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <title>Success</title>
</head>
<body>
    {{session}}
    <nav class="navbar border-bottom border-dark p-3">
        <p class="navbar-brand">Coding Dojo Wall</p>
        <span>Welcome {{session["first_name"]}}</span>
        <form action="/logout" method="POST" class="form-inline">
            <button>Log out</button>
        </form>
    </nav>

    <form action="/post" method="POST">
        <div class="form-group p-5">
            <p>
                What's on your mind? Create a post:
            </p> 
            <div class="form-group border-bottom pb-3">
                <label for="user_post"></label> 
                <textarea name="user_post" cols="50" rows="5" ></textarea>
            </br>
                <button class="btn btn-primary">Publish</button>
            </div>
        </div>
    </form>

    <div class="community_posts">
        <h3>All Community Posts</h3>
    </div>
    <ul>
        {% for each_post in all_posts %}

        <li>{{each_post.content}}</li>
        <li>User id: {{each_post.user_id}} - {{each_post.created_at.strftime('%B %d')}}</li>
        <li>Session: {{session['id']}}</li>
        {% if each_post.user_id == session['id'] %}
        <form action="/delete_post" method="POST">
            <input type="hidden" name="post_id" value="{{each_post.id}}">
            <button>Delete</button>
        </form>
        {% endif %}
        {% endfor %}
    </ul>
</body>
</html>